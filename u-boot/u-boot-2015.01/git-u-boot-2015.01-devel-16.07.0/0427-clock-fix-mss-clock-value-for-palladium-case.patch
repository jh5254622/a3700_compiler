From c6f8c6762aa3ffa267e3b6591b7e67e10c146892 Mon Sep 17 00:00:00 2001
From: Yehuda Yitschak <yehuday@marvell.com>
Date: Mon, 12 Oct 2015 12:37:15 +0300
Subject: [PATCH 0427/1240] clock: fix mss clock value for palladium case

Change-Id: I836a2d91a105c30db33f3b60384d1ff014835a18
Signed-off-by: Yehuda Yitschak <yehuday@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/23944
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
---
 arch/arm/cpu/armv8/armada8k/clock.c | 4 ++++
 include/configs/armada8k.h          | 1 -
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/arch/arm/cpu/armv8/armada8k/clock.c b/arch/arm/cpu/armv8/armada8k/clock.c
index 7ab623a..7d278fd 100644
--- a/arch/arm/cpu/armv8/armada8k/clock.c
+++ b/arch/arm/cpu/armv8/armada8k/clock.c
@@ -53,7 +53,11 @@ u32 soc_get_mss_clk(void)
 
 u32 soc_tclk_get(void)
 {
+#ifndef CONFIG_PALLADIUM
 	return soc_get_mss_clk();
+#else
+	return CONFIG_MSS_FREQUENCY;
+#endif
 }
 
 u32 soc_get_cpu_clk(void)
diff --git a/include/configs/armada8k.h b/include/configs/armada8k.h
index dabb1aa..4825704 100644
--- a/include/configs/armada8k.h
+++ b/include/configs/armada8k.h
@@ -48,7 +48,6 @@
 /* Clock Definitions */
 #ifndef CONFIG_PALLADIUM
 #define COUNTER_FREQUENCY	(25 * 1000000)
-#define CONFIG_MSS_FREQUENCY	(200 * MHZ)
 #else
 #define COUNTER_FREQUENCY	(48000)
 #define CONFIG_MSS_FREQUENCY	(384000)
-- 
1.9.1

