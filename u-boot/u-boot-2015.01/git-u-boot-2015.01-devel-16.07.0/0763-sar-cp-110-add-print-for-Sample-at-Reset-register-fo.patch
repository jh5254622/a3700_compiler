From 02d3077154e0fc616c3a342d32664b68d55e8fce Mon Sep 17 00:00:00 2001
From: Hanna Hawa <hannah@marvell.com>
Date: Tue, 2 Feb 2016 10:12:02 +0200
Subject: [PATCH 0763/1240] sar: cp-110: add print for Sample at Reset register
 for CP-110

Change-Id: I2da8007daa6174488973e28f71737546796b7a16
Signed-off-by: Hanna Hawa <hannah@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/27121
Reviewed-by: Haim Boot <hayim@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
---
 arch/arm/cpu/mvebu-common/tools/mvebu_sar.c     | 3 +++
 arch/arm/include/asm/arch-armada8k/memory-map.h | 6 ++++++
 arch/arm/include/asm/arch-armada8k/sar.h        | 1 +
 3 files changed, 10 insertions(+)

diff --git a/arch/arm/cpu/mvebu-common/tools/mvebu_sar.c b/arch/arm/cpu/mvebu-common/tools/mvebu_sar.c
index 098a481..157cf48 100644
--- a/arch/arm/cpu/mvebu-common/tools/mvebu_sar.c
+++ b/arch/arm/cpu/mvebu-common/tools/mvebu_sar.c
@@ -65,5 +65,8 @@ void mvebu_sar_dump_reg(void)
 		printf("%s  0x%x\n", sar->name, val);
 		sar++;
 	}
+
+	printf("CP110: SAR register 0 reg = 0x%lx [0x%08x]\n",
+		CP0_SAMPLE_AT_RESET_REG_0, readl(CP0_SAMPLE_AT_RESET_REG_0));
 	printf("\n");
 }
diff --git a/arch/arm/include/asm/arch-armada8k/memory-map.h b/arch/arm/include/asm/arch-armada8k/memory-map.h
index ee703b3..ed81137 100644
--- a/arch/arm/include/asm/arch-armada8k/memory-map.h
+++ b/arch/arm/include/asm/arch-armada8k/memory-map.h
@@ -30,6 +30,12 @@
 #endif
 #define MVEBU_REGS_SIZE 	(0x100000)
 
+#ifdef __ASSEMBLY__
+#define MVEBU_CP0_REGS_BASE	(0xF2000000)
+#else
+#define MVEBU_CP0_REGS_BASE	(0xF2000000UL)
+#endif
+
 #define DRAM_0_BASE_ADDR	0x0
 #define DRAM_0_SIZE		0x40000000
 
diff --git a/arch/arm/include/asm/arch-armada8k/sar.h b/arch/arm/include/asm/arch-armada8k/sar.h
index 793e6bb..bdbed26 100644
--- a/arch/arm/include/asm/arch-armada8k/sar.h
+++ b/arch/arm/include/asm/arch-armada8k/sar.h
@@ -51,6 +51,7 @@
 #define SAR1_STANDALONE_OFFSET		(24)
 #define SAR1_STANDALONE_MASK		(1 << SAR1_STANDALONE_OFFSET)
 
+#define CP0_SAMPLE_AT_RESET_REG_0	(MVEBU_CP0_REGS_BASE + 0x440600)
 
 struct sar_info {
 	char *name;
-- 
1.9.1

