From 0db881b620ad39d9c5bf4833d8bf376c4691270b Mon Sep 17 00:00:00 2001
From: jinghua <jinghua@marvell.com>
Date: Thu, 4 Feb 2016 22:24:07 +0800
Subject: [PATCH 0801/1240] doc: mvebu: add "example" section in fdt_config.txt

Change-Id: Iaeb09681762d38850c00c0aa70c465d864d8357d
Signed-off-by: jinghua <jinghua@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/27208
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
---
 doc/mvebu/commands/fdt_config.txt | 52 ++++++++++++++++++++++++++++++++++++++-
 1 file changed, 51 insertions(+), 1 deletion(-)

diff --git a/doc/mvebu/commands/fdt_config.txt b/doc/mvebu/commands/fdt_config.txt
index b389892..2815bdb 100644
--- a/doc/mvebu/commands/fdt_config.txt
+++ b/doc/mvebu/commands/fdt_config.txt
@@ -12,7 +12,13 @@ notes:
    the <option_id> available are received from this list.
 3. All changes will be relevant only after running the save command ("fdt_config save") and reset the board.
 4. The list of all the available configurations is located under "doc/mvebu/a8k/board_options"
-
+5. This feature reads configuration from eeprom, so before running it for the first time,
+   please erase eeprom to avoid any garbage data with command "i2c mw.l 0x57 0.2 0 0x200".
+   Please be noted:
+   a) In I2C erase command, 0x57 is the eeprom address for A3700 DB, for other boards it would be different,
+      please check the board Spec.
+   b) Erase eeprom is a temporary work around, when this feature is mature enough to handle the garbage data
+      in eeprom, it would not be necessary.
 
 "fdt_config on" -   enable the option to read Device Tree from eeprom at boot time.
 
@@ -42,3 +48,47 @@ notes:
 			    because the option_id received from this list.
 
 "fdt_config save" - write Device Tree changes from RAM to EEPROM.
+
+example:
+------
+   i) Choose one of dtb files in u-boot image to boot with.
+      a) List all the dtb files in u-boot image.
+	 Marvell>> fdt_config list
+	 FDT config list:
+	 1 - DB-88F3720-DDR3-Modular
+	 2 - DB-88F3720-DDR3-Modular-SGMII1
+      b) Choose one dtb to boot with for next time.
+	 Marvell>> fdt_config select 2
+	 To save the changes, please run the command fdt_config save.
+      c) Save the configuration.
+	 Marvell>> fdt_config save
+      d) Reset, then u-boot would start with the dtb file selected.
+	 Marvell>> reset
+   ii) Load certain dtb file from u-boot image into dram, modify it,
+       then burn it into eeprom and boot with it.
+      a) Turn on boot with dtb in eeprom feature.
+	 Marvell>> fdt_config on
+	 Do you want to read FDT from EEPROM? <y/N> y
+	 Load fdt from EEprom
+	 To save the changes, please run the command fdt_config save.
+      b) List all the dtb files in u-boot image.
+	 Marvell>> fdt_config list
+	 FDT config list:
+	 1 - DB-88F3720-DDR3-Modular
+	 2 - DB-88F3720-DDR3-Modular-SGMII1
+      c) Load dtb file into dram.
+	 Marvell>> fdt_config read flash 2
+	 To save the changes, please run the command fdt_config save.
+      d) Run "fdt print" command to see the entire dtb file in dram.
+      e) Edit any property, for example, preset value in A3700 dts file.
+         Following is all the valid values for property "preset":
+	 PRESET_CPU_600_DDR_600:  0
+	 PRESET_CPU_400_DDR_600:  1
+	 PRESET_CPU_1000_DDR_800: 2
+	 PRESET_CPU_800_DDR_800:  3
+
+	 Marvell>> fdt set /soc/freq preset "<1>"
+      f) Save the dtb file into eeprom.
+	 Marvell>> fdt_config save
+      g) Reset, then u-boot would start with the dtb file in eeprom.
+	 Marvell>> reset
-- 
1.9.1

