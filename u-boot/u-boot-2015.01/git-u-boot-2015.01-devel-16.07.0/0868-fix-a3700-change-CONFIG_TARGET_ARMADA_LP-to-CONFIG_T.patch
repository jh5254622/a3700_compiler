From 9f6c48d94ec4e360808b7409fcf92de4a7daa463 Mon Sep 17 00:00:00 2001
From: Wilson Ding <dingwei@marvell.com>
Date: Tue, 16 Feb 2016 17:58:37 +0800
Subject: [PATCH 0868/1240] fix: a3700: change CONFIG_TARGET_ARMADA_LP to
 CONFIG_TARGET_ARMADA_3700

Change-Id: I515462be19f0795dacd4fa31cb21492c947cc803
Signed-off-by: Wilson Ding <dingwei@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/27552
Reviewed-by: Hanna Hawa <hannah@marvell.com>
Tested-by: Hanna Hawa <hannah@marvell.com>
---
 Makefile                                     | 4 ++--
 arch/arm/Kconfig                             | 4 ++--
 arch/arm/cpu/armv8/armada3700/Kconfig        | 4 ++--
 arch/arm/cpu/mvebu-common/dram_over_pci.c    | 2 +-
 arch/arm/dts/Makefile                        | 4 ++--
 arch/arm/include/asm/arch-mvebu/comphy.h     | 2 +-
 common/mvebu/cmd_bubt.c                      | 2 +-
 configs/mvebu_armada3700_defconfig           | 2 +-
 configs/mvebu_armada3700_palladium_defconfig | 2 +-
 drivers/ddr/Makefile                         | 2 +-
 drivers/phy/Makefile                         | 2 +-
 drivers/phy/comphy_core.c                    | 2 +-
 12 files changed, 16 insertions(+), 16 deletions(-)

diff --git a/Makefile b/Makefile
index 0034144..810f561 100644
--- a/Makefile
+++ b/Makefile
@@ -886,7 +886,7 @@ bin2phex: doimage
 		$(BIN2PHEX) -w 1  -i u-boot-spl.bin -o u-boot-spl.hex -b 0x0
 		$(BIN2PHEX) -w 16 -i u-boot.bin -o u-boot.hex -b 0x0
 
-else ifeq ($(CONFIG_TARGET_ARMADA_LP), y)
+else ifeq ($(CONFIG_TARGET_ARMADA_3700), y)
 
 BIN2PHEX	:= $(srctree)/scripts/bin2phex.pl
 TIM2PHEX	:= $(srctree)/scripts/tim2phex.pl
@@ -981,7 +981,7 @@ doimage: $(obj)/u-boot.bin $(DOIMAGE) $(SPLIMAGE)
 		cat spl/u-boot-spl.bin.old >> spl/u-boot-spl.bin;
 		$(DOIMAGE) $(DOIMAGE_FLAGS) u-boot.bin u-boot-spl.bin
 
-endif # CONFIG_TARGET_ARMADA_8K/CONFIG_TARGET_ARMADA_LP/CONFIG_TARGET_ARMADA_38X
+endif # CONFIG_TARGET_ARMADA_8K/CONFIG_TARGET_ARMADA_3700/CONFIG_TARGET_ARMADA_38X
 endif # CONFIG_MVEBU
 
 #
diff --git a/arch/arm/Kconfig b/arch/arm/Kconfig
index b48ddec..662f7a1 100644
--- a/arch/arm/Kconfig
+++ b/arch/arm/Kconfig
@@ -111,8 +111,8 @@ config TARGET_ARMADA_38X
 	bool "Support Armada 38x"
 	select SUPPORT_SPL
 
-config TARGET_ARMADA_LP
-	bool "Support Armada LP"
+config TARGET_ARMADA_3700
+	bool "Support Armada 3700"
 	select SUPPORT_SPL
 	select ARM64
 
diff --git a/arch/arm/cpu/armv8/armada3700/Kconfig b/arch/arm/cpu/armv8/armada3700/Kconfig
index 20a976d..ac11a5a 100644
--- a/arch/arm/cpu/armv8/armada3700/Kconfig
+++ b/arch/arm/cpu/armv8/armada3700/Kconfig
@@ -1,4 +1,4 @@
-if TARGET_ARMADA_LP
+if TARGET_ARMADA_3700
 
 config SYS_CPU
 	string
@@ -37,7 +37,7 @@ config PALLADIUM
 
 config MVEBU_SPL_A3700_GPIO
 	bool "GPIO configuration for A3700 in SPL"
-	depends on TARGET_ARMADA_LP
+	depends on TARGET_ARMADA_3700
 	default y
 	help
 	  Choose this option to enable GPIO
diff --git a/arch/arm/cpu/mvebu-common/dram_over_pci.c b/arch/arm/cpu/mvebu-common/dram_over_pci.c
index 3694ca4..c8749f77 100644
--- a/arch/arm/cpu/mvebu-common/dram_over_pci.c
+++ b/arch/arm/cpu/mvebu-common/dram_over_pci.c
@@ -95,7 +95,7 @@ void dram_over_pci_window_config(void)
 	writel(val, RFU_WIN_PEX_CFG);
 }
 
-#elif defined(CONFIG_TARGET_ARMADA_LP)
+#elif defined(CONFIG_TARGET_ARMADA_3700)
 
 void dram_over_pci_window_config(void)
 {
diff --git a/arch/arm/dts/Makefile b/arch/arm/dts/Makefile
index 8c68543..1f6970c 100644
--- a/arch/arm/dts/Makefile
+++ b/arch/arm/dts/Makefile
@@ -54,14 +54,14 @@ dtb-$(CONFIG_SOCFPGA) += socfpga_cyclone5_socrates.dtb
 # If Multi-FDT feature is enabled, all the DTB files that are compiled
 # will be linked into SPL, the dtb size increase the SPL size.
 dtb-$(CONFIG_TARGET_ARMADA_38X) += armada-385-db.dtb
-ifdef CONFIG_TARGET_ARMADA_LP
+ifdef CONFIG_TARGET_ARMADA_3700
 ifndef CONFIG_DEVEL_BOARD
 dtb-y += armada-lp-customer0.dtb
 endif #CONFIG_DEVEL_BOARD
 dtb-$(CONFIG_DEVEL_BOARD) += armada-lp-db.dtb \
 			     armada-lp-db-sgmii1.dtb
 dtb-$(CONFIG_PALLADIUM) += armada-lp-palladium.dtb
-endif #CONFIG_TARGET_ARMADA_LP
+endif #CONFIG_TARGET_ARMADA_3700
 
 ifdef CONFIG_TARGET_ARMADA_8K
 dtb-$(CONFIG_PALLADIUM) += apn-806-pd.dtb \
diff --git a/arch/arm/include/asm/arch-mvebu/comphy.h b/arch/arm/include/asm/arch-mvebu/comphy.h
index c3a58b4..2787dae 100644
--- a/arch/arm/include/asm/arch-mvebu/comphy.h
+++ b/arch/arm/include/asm/arch-mvebu/comphy.h
@@ -81,7 +81,7 @@ int comphy_a38x_init(struct chip_serdes_phy_config *ptr_chip_cfg, struct comphy_
 #elif defined(CONFIG_TARGET_ARMADA_8K)
 int comphy_ap806_init(struct chip_serdes_phy_config *ptr_chip_cfg, struct comphy_map *serdes_map);
 int comphy_cp110_init(struct chip_serdes_phy_config *ptr_chip_cfg, struct comphy_map *serdes_map);
-#elif defined(CONFIG_TARGET_ARMADA_LP)
+#elif defined(CONFIG_TARGET_ARMADA_3700)
 int comphy_a3700_init(struct chip_serdes_phy_config *ptr_chip_cfg, struct comphy_map *serdes_map);
 #endif
 
diff --git a/common/mvebu/cmd_bubt.c b/common/mvebu/cmd_bubt.c
index 7fe162c..79bfabe 100644
--- a/common/mvebu/cmd_bubt.c
+++ b/common/mvebu/cmd_bubt.c
@@ -487,7 +487,7 @@ static int check_image_header(void)
 
 	return 0;
 }
-#elif defined(CONFIG_TARGET_ARMADA_LP) /* ArmadaLP */
+#elif defined(CONFIG_TARGET_ARMADA_3700) /* Armada 3700 */
 static int check_image_header(void)
 {
 	/* Armada3700 has different Image, without mvebu
diff --git a/configs/mvebu_armada3700_defconfig b/configs/mvebu_armada3700_defconfig
index 9b220d1..0db11b5 100644
--- a/configs/mvebu_armada3700_defconfig
+++ b/configs/mvebu_armada3700_defconfig
@@ -1,7 +1,7 @@
 CONFIG_SPL=y
 CONFIG_SYS_EXTRA_OPTIONS="ARM64"
 +S:CONFIG_ARM=y
-+S:CONFIG_TARGET_ARMADA_LP=y
++S:CONFIG_TARGET_ARMADA_3700=y
 +S:CONFIG_MVEBU_A3700_IO_ADDR_DEC=y
 +S:CONFIG_MVEBU_A3700_MISC_INIT=y
 +S:CONFIG_MVEBU_A3700_CLOCK=y
diff --git a/configs/mvebu_armada3700_palladium_defconfig b/configs/mvebu_armada3700_palladium_defconfig
index 8489ec3..ee9c0c5 100644
--- a/configs/mvebu_armada3700_palladium_defconfig
+++ b/configs/mvebu_armada3700_palladium_defconfig
@@ -1,7 +1,7 @@
 CONFIG_SPL=y
 CONFIG_SYS_EXTRA_OPTIONS="ARM64"
 +S:CONFIG_ARM=y
-+S:CONFIG_TARGET_ARMADA_LP=y
++S:CONFIG_TARGET_ARMADA_3700=y
 +S:CONFIG_PALLADIUM=y
 +S:CONFIG_MVEBU_A3700_IO_ADDR_DEC=y
 +S:CONFIG_MVEBU_A3700_MISC_INIT=y
diff --git a/drivers/ddr/Makefile b/drivers/ddr/Makefile
index 98f3224..7f937b0 100644
--- a/drivers/ddr/Makefile
+++ b/drivers/ddr/Makefile
@@ -2,7 +2,7 @@ obj-y += mvebu_ddr.o
 obj-$(CONFIG_MVEBU_DUNIT_SUPPORT) += ddr_dunit.o
 ifdef CONFIG_MVEBU_MK6_SUPPORT
 ifdef CONFIG_MVEBU_STATIC_SUPPORT
-obj-$(CONFIG_TARGET_ARMADA_LP) +=ddr_mckinley6_arlp.o
+obj-$(CONFIG_TARGET_ARMADA_3700) +=ddr_mckinley6_arlp.o
 obj-$(CONFIG_TARGET_ARMADA_8K) +=ddr_mckinley6_8k.o
 endif# CONFIG_MVEBU_STATIC_SUPPORT
 # in case of dynamic supprt include the below
diff --git a/drivers/phy/Makefile b/drivers/phy/Makefile
index 8506f1b..3730f03 100644
--- a/drivers/phy/Makefile
+++ b/drivers/phy/Makefile
@@ -4,4 +4,4 @@ obj-$(CONFIG_TARGET_ARMADA_38X) += comphy_a38x.o
 obj-$(CONFIG_TARGET_ARMADA_38X) += comphy_a38x_pcie_config.o
 obj-$(CONFIG_TARGET_ARMADA_8K) += comphy_ap806_z1.o
 obj-$(CONFIG_TARGET_ARMADA_8K) += comphy_cp110.o
-obj-$(CONFIG_TARGET_ARMADA_LP) += comphy_a3700.o
+obj-$(CONFIG_TARGET_ARMADA_3700) += comphy_a3700.o
diff --git a/drivers/phy/comphy_core.c b/drivers/phy/comphy_core.c
index b361ef1..74acb56 100644
--- a/drivers/phy/comphy_core.c
+++ b/drivers/phy/comphy_core.c
@@ -36,7 +36,7 @@ struct chip_serdes_phy_config chip_config[] = {
 	{.compat = COMPAT_COMPHY_CP110,
 	 .ptr_comphy_chip_init = comphy_cp110_init },
 #endif
-#ifdef CONFIG_TARGET_ARMADA_LP
+#ifdef CONFIG_TARGET_ARMADA_3700
 	{.compat = COMPAT_COMPHY_ARMADA_LP,
 	 .ptr_comphy_chip_init = comphy_a3700_init },
 #endif
-- 
1.9.1

