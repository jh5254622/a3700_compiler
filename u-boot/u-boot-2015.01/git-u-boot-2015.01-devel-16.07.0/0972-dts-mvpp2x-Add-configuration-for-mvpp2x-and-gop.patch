From 54777bdfd4b11ad73cf0ccc084b57295ac5ede69 Mon Sep 17 00:00:00 2001
From: Stefan Chulski <stefanc@marvell.com>
Date: Mon, 14 Mar 2016 19:36:32 +0200
Subject: [PATCH 0972/1240] dts: mvpp2x: Add configuration for mvpp2x and gop

Change-Id: I2f82345bd56f8181ec3954a267ca1d48a0b9a0e0
Reviewed-on: http://vgitil04.il.marvell.com:8080/28235
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
---
 arch/arm/dts/armada-7040-rz-db_kr.dts     | 37 +++++++++++++++++++++++++++++++
 arch/arm/dts/armada-7040-rz-db_router.dts | 37 +++++++++++++++++++++++++++++++
 arch/arm/dts/cp110-master.dtsi            | 25 +++++++++++++++++++++
 arch/arm/dts/cp110-slave.dtsi             | 26 ++++++++++++++++++++++
 arch/arm/dts/cp110.dtsi                   | 33 +++++++++++++++++++++++++++
 5 files changed, 158 insertions(+)

diff --git a/arch/arm/dts/armada-7040-rz-db_kr.dts b/arch/arm/dts/armada-7040-rz-db_kr.dts
index cf98156..2f449fb 100644
--- a/arch/arm/dts/armada-7040-rz-db_kr.dts
+++ b/arch/arm/dts/armada-7040-rz-db_kr.dts
@@ -147,6 +147,43 @@
 					phy-speed = <PHY_SPEED_5G>;
 				};
 			};
+			mdio {
+				#address-cells = <1>;
+				#size-cells = <0>;
+				phy2: ethernet-phy@2 {
+					reg = <0>;
+				};
+				phy3: ethernet-phy@3 {
+					reg = <1>;
+				};
+			};
+			gop {
+				mac0 {
+					phy-mode = "sgmii"; /* lane-2 */
+					status = "okay";
+				};
+				mac2 {
+					phy-mode = "rgmii"; /* rgmii-0 */
+					phy = <&phy2>;
+					status = "okay";
+				};
+				mac3 {
+					phy-mode = "rgmii"; /* rgmii-1 */
+					phy = <&phy3>;
+					status = "okay";
+				};
+			};
+			ppv22@000000 {
+				eth0@010000 {
+					status = "okay";
+				};
+				eth1@020000 {
+					status = "okay";
+				};
+				eth2@030000 {
+					status = "okay";
+				};
+			};
 		};
 	};
 };
diff --git a/arch/arm/dts/armada-7040-rz-db_router.dts b/arch/arm/dts/armada-7040-rz-db_router.dts
index 877426c..eb0e0ce 100644
--- a/arch/arm/dts/armada-7040-rz-db_router.dts
+++ b/arch/arm/dts/armada-7040-rz-db_router.dts
@@ -139,6 +139,43 @@
 					phy-speed = <PHY_SPEED_5G>;
 				};
 			};
+			mdio {
+				#address-cells = <1>;
+				#size-cells = <0>;
+				phy2: ethernet-phy@2 {
+					reg = <0>;
+				};
+				phy3: ethernet-phy@3 {
+					reg = <1>;
+				};
+			};
+			gop {
+				mac0 {
+					phy-mode = "sgmii"; /* lane-2 */
+					status = "okay";
+				};
+				mac2 {
+					phy-mode = "rgmii"; /* rgmii-0 */
+					phy = <&phy2>;
+					status = "okay";
+				};
+				mac3 {
+					phy-mode = "rgmii"; /* rgmii-1 */
+					phy = <&phy3>;
+					status = "okay";
+				};
+			};
+			ppv22@000000 {
+				eth0@010000 {
+					status = "okay";
+				};
+				eth1@020000 {
+					status = "okay";
+				};
+				eth2@030000 {
+					status = "okay";
+				};
+			};
 		};
 	};
 };
diff --git a/arch/arm/dts/cp110-master.dtsi b/arch/arm/dts/cp110-master.dtsi
index abaa8aa..628505b 100644
--- a/arch/arm/dts/cp110-master.dtsi
+++ b/arch/arm/dts/cp110-master.dtsi
@@ -39,6 +39,31 @@
 		internal-regs {
 			refclk: refclk {
 			};
+			gop {
+				emac0: mac0 {
+					mac-address = [00 00 00 00 00 01];
+					port-id = <0>; /* gop_port_id */
+				};
+				emac2: mac2 {
+					mac-address = [00 00 00 00 00 02];
+					port-id = <2>; /* gop_port_id */
+				};
+				emac3: mac3 {
+					mac-address = [00 00 00 00 00 03];
+					port-id = <3>; /* gop_port_id */
+				};
+			};
+			ppv22@000000 {
+				eth0@010000 {
+					emac-data = <&emac0>;
+				};
+				eth1@020000 {
+					emac-data = <&emac2>;
+				};
+				eth2@030000 {
+					emac-data = <&emac3>;
+				};
+			};
 		};
 	};
 };
diff --git a/arch/arm/dts/cp110-slave.dtsi b/arch/arm/dts/cp110-slave.dtsi
index 8e241a2..8d8163d 100644
--- a/arch/arm/dts/cp110-slave.dtsi
+++ b/arch/arm/dts/cp110-slave.dtsi
@@ -54,6 +54,32 @@
 					mem = <0xfc000000 0x1000000>;
 				};
 			};
+
+			gop {
+				emac4: mac0 {
+					mac-address = [00 00 00 00 00 04];
+					port-id = <0>; /* gop_port_id */
+				};
+				emac6: mac2 {
+					mac-address = [00 00 00 00 00 06];
+					port-id = <2>; /* gop_port_id */
+				};
+				emac7: mac3 {
+					mac-address = [00 00 00 00 00 07];
+					port-id = <3>; /* gop_port_id */
+				};
+			};
+			ppv22@000000 {
+				eth0@010000 {
+					emac-data = <&emac4>;
+				};
+				eth1@020000 {
+					emac-data = <&emac6>;
+				};
+				eth2@030000 {
+					emac-data = <&emac7>;
+				};
+			};
 		};
 	};
 };
diff --git a/arch/arm/dts/cp110.dtsi b/arch/arm/dts/cp110.dtsi
index 9b7b669..216556f 100644
--- a/arch/arm/dts/cp110.dtsi
+++ b/arch/arm/dts/cp110.dtsi
@@ -161,3 +161,36 @@ comphy {
 	reg-comphy = <0x441000 0x8>;
 	reg-hpipe3 = <0x120000 0x8>;
 };
+
+ppv22@000000 {
+	compatible = "marvell,armada-a8k-pp2";
+	pp     = <0x000000 0x80000>; /* Packet Processor regs */
+	serdes = <0x120000 0x9000>; /* SERDES regs */
+	xmib   = <0x129000 0x0600>; /* XMIB regs */
+	led    = <0x12a000 0x200>;  /* LED regs */
+	smi    = <0x12a200 0x200>;  /* SMI regs */
+	tai    = <0x12a400 0x200>;  /* TAI regs */
+	xsmi   = <0x12a600 0x200>;  /* XSMI regs */
+	mg     = <0x12b000 0x1000>;  /* MG Internal regs */
+	mspg   = <0x130000 0x6000>; /* MSPG regs */
+	xpcs   = <0x130400 0x200>;  /* MSPG - XPCS regs */
+	gmac   = <0x130e00 0x100>;  /* MSPG - GMAC regs */
+	xlg    = <0x130f00 0x100>;  /* MSPG - XLG MAC regs */
+	rfu1   = <0x441000 0x1000>;  /* RFU-1 Regs */
+	status = "okay";
+
+	eth0@010000 {
+		port-id = <0>; /* pp2_port_id */
+		status = "disabled";
+	};
+	eth1@020000 {
+		port-id = <1>; /* pp2_port_id */
+		status = "disabled";
+	};
+	eth2@030000 {
+		port-id = <2>; /* pp2_port_id */
+		status = "disabled";
+	};
+
+};
+
-- 
1.9.1

